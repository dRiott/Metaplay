	$(document).ready(function(){
		var countTEXT = 0;
		var countJSON = 0;
		var json;
		
	// *****************************START Event Handlers***************************************
		$('#button').click(function() {
	        console.log("in button");
	        getMyName();

	    });
		
		$('#randomResultButton').click(function() {
	        console.log("in random result button");
	        getRandomSingleResult();
	        console.log(json);
				$('#randomResult').html(json.name + " " + json.id);
	   			countJSON++;
		});	
		
		
		$('#searchInput').on("keyup", function(e) {
			var field = e.target;
			if(field.value.length>0) {
				$.ajax({
					headers: { 
				        'Accept': 'application/json',
				        'Content-Type': 'application/json' 
				    },
					url: '/metaplay/rest/artist?query='+field.value,
					type: 'POST',
					dataType: 'json',
//					data: 'query='+field.value,
					success: successfulSearch,
					error: errorFunction
				})
			}
			
		});
	// *****************************END Event Handlers***************************************	
		
		
		//get JSON data
		$.ajax({
	        url: "/metaplay/rest/artist",
	        method: "get",
	        dataType: "json",
	        success: successfulJSON,
	        error: errorFunction
		})
		
		//JSON functions
		function successfulJSON(returnedData, status) {
			console.log("in success JSON");
			console.log(returnedData);
			//set global variable to access on click
			json = returnedData; 
		}
		
		//text return
		function getMyName() {
	        console.log("in getMYName");
			$.ajax({
		        url: "/metaplay/rest/artist/?id="+countTEXT, 
		        method: "get", 
		        dataType: "text",
		        success: successfulAJAX
			}).fail(function(data) {
	            console.log("AJAX load failed");
	        });
	        countTEXT++;
		}
		
		//gets a random result
		function getRandomSingleResult() {
			console.log("in getRandomResult function");
			$.ajax({
				headers: { 
			        'Accept': 'application/json',
			        'Content-Type': 'application/json' 
			    },
				url: "/metaplay/rest/singlerandom", 
				method: "get", 
				dataType: "json",
				success: successfulRandomSingleResult
			}).fail(function(data) {
				console.log("getRandomResult() load failed");
			});
		}
	
		function successfulRandomSingleResult(returnedData, status) {
			console.log("in successfulRandomResult function");

			if (returnedData.entityType.equals("location")) {
				var url = "<a href='/metaplay/browse/"+returnedData.entityType+"/"+returnedData.id+"'>"+returnedData.city+", " + returnedData.state + "</a>"
				console.log("I think I've got a location");
			} else if (returnedData.entityType.equals("member")) {
				var url = "<a href='/metaplay/browse/"+returnedData.entityType+"/"+returnedData.id+"'>"+returnedData.lastname+", " + returnedData.firstname + "</a>"
				console.log("I think I've got a member");
			} else {
				var url = "<a href='/metaplay/browse/"+returnedData.entityType+"/"+returnedData.id+"'>"+returnedData.name+"</a>"
				console.log("I think I've got something else");
			}
			$('#randomResultDiv').html(url);
		}
		
		function successfulSearch(returnedData, status) {
			console.log("in successfulSearch method");
			console.log("Returned data (size) : " + returnedData.length);
			console.log("One item of returnedData (.name): " + returnedData[0].name);
			var table = $('#resultsTable');
			console.log("Got the table! Rows.length: " + table.length);
			for(var i=0; i<returnedData.length; i++){
				 var row = $("<tr>");
				 var url = "<a href='/metaplay/browse/artist/"+returnedData[i].id+"'>"+returnedData[i].name+"</a>"
				 if(!$("#resultsTable tr > a").is(":contains("+returnedData[i].name+")")) {
					 row.append($(url + returnedData[i].TYPE));
				 }
				 $("#resultsTable tbody").append(row);
			}
		}
		
		function errorFunction(returnedData, status) {
			console.log("SOMETHING WENT WRONG");
		}
	
			
		}); //end document.ready