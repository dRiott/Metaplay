/**
 *  Configures the sortable, draggable, and selectable tracks.
 */

$(document).ready(function () {

	
	$('td, th', '#tracksTable').each(function () {
        var cell = $(this);
        cell.width(cell.width());
    });
	
	$('td, th', '#playlistTable').each(function () {
		var cell = $(this);
		cell.width(cell.width());
	});

    $("#tracksTable tbody").sortable({
    	connectWith: "#playlistTable tbody"
    });
	
	$("#playlistTable tbody").sortable({
		connectWith: "#tracksTable tbody"
	});
	
	$('.tdWidth').each(function(index) {
	    $("#playlistTHeadTh" + index).css("width", 1.1*$(this).width());
	    $("#trackTHeadTh" + index).css("width", 1.1*$(this).width());
	    if (index > 2) {
	    	return false;
	    }
	});
	
	
	$("#playlistSubmitButton").click(function(e) {
		e.preventDefault();
		$(document.body).css({'cursor' : 'wait'});
		
		$.ajax({
			headers: { 
		        'Accept': 'application/json',
		        'Content-Type': 'application/json' 
		    },
			url: '/metaplay/rest/playlist',
			type: 'POST',
			dataType: 'json',
			data: 'query='+field.value,
			success: playlistSuccess,
			error: playlistError
		})

	})
	
	
	//		$(document.body).css({'cursor' : 'default'});

	
}); // end document.ready

	
function playlistSuccess() {
	
	
	$("#messageDiv").html("Playlist created successfully.").show(1000);
	
	$("#playlistTable tbody tr").remove();
}

function playlistError() {
	
}

